
@model IEnumerable<RoyalHalls1.Models.Reservation>

@{
    ViewData["Title"] = "Report";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
        ViewBag.AP = ViewBag.adminProfile;

}   

<link href="https://cdn.datatables.net/1.11.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/buttons/2.0.0/css/buttons.dataTables.min.css" rel="stylesheet" />

<h1>Report</h1>


<div class="page-wrapper">
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <div class="page-breadcrumb bg-white">
                <div class="row align-items-center">
                    <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
                        <h4 class="page-title">Manage Halls</h4>
                    </div>
                    <div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
                        <div class="d-md-flex">
                            <ol class="breadcrumb ms-auto">
                                <li><a href="#" class="fw-normal">Reports</a></li>
                            </ol>
                            
                        </div>
                    </div>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">
                <!-- ============================================================== -->
                <!-- Start Page Content -->
                <!-- ============================================================== -->
                

                <div class="row">
                    <div class="col-sm-12">
                        <div class="white-box">
                            
                            <div class="table-responsive">

                        <div class="row">

                            <div class="col-6">
 

                                <form asp-action="Report" method="post">
                                <input type="number" class="form-control" name="year" placeholder="enter year" />
                                <br />
                                <label for="month">Choose a month</label>
                                 <select name="month">
                                      <option>none</option>
                                      <option value=1>Jan</option>
                                      <option value=2>Feb</option>
                                      <option value=3>Mar</option>
                                      <option value=4>Apr</option>
                                      <option value=5>May</option>
                                      <option value=6>Jun</option>
                                      <option value=7>Jul</option>
                                      <option value=8>Aug</option>
                                      <option value=9>Sep</option>
                                      <option value=10>Oct</option>
                                      <option value=11>Nov</option>
                                      <option value=12>Dec</option>
                                </select>
                                <br />
                                
                                <button type="submit" class="btn btn-dark">Filter</button>
                            </form>


                            </div>

                        </div>




 <table class="table text-nowrap" id="example">
                                    <thead>
                                        <tr>
                                           
                                            <th class="border-top-0">User Name</th>
                                            <th class="border-top-0">Email</th>
                                            <th class="border-top-0">Hall name</th>
                                            <th class="border-top-0">Hall Address</th>
                                            <th class="border-top-0">Date</th>
                                            <th class="border-top-0">status</th>
                                            <th class="border-top-0">Total price</th>




                                            


                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var item in Model)
                                       {
                                           <tr>
                                            <td>@item.Users.Username</td>
                                            <td>@item.Users.Email</td>
                                            <td>@item.Halls.HName</td>
                                            <td>@item.Halls.HAddress</td>
                                            <td>@item.Datefrom</td>
                                            <td>@item.Status</td>
                                            <td>@item.TotalPrice</td>
                                        </tr>                                           
                                       }
                                       <tr>
                                           <td>Total users that has made reservation</td>
                                           <td>@ViewBag.numUrese  Users</td>
                                           <td></td>
                                           <td></td>
                                           <td></td>
                                           <td></td>
                                           <td></td>
                                          
                                       </tr>

                                     <tr>
                                           <td>Total Revenu for approved reservation</td>
                                           <td>@ViewBag.totalPres  $</td>
                                           <td></td>
                                           <td></td>
                                           <td></td>
                                           <td></td>
                                           <td></td>
                                          
                                       </tr>
                                       <tr>
                                           <td>Total loses from rejecting reservation</td>
                                           <td>@ViewBag.totalLres  $</td>

                                           <td></td>
                                           <td></td>
                                           <td></td>
                                           <td></td>
                                           <td></td>
                                          
                                       </tr>

                                       <tr>
                                           <td>the number of approved reservation per year</td>                                           
                                           <td>
                                               <div>
                                                    <canvas id="myChart"></canvas>
                                               </div>

                                           </td>
                                           <td></td>
                                           <td> </td>
                                           <td></td>
                                           <td></td>
                                           <td></td>


                                       </tr>


                                        
                                    </tbody>
                                </table>

            
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ============================================================== -->
                <!-- End PAge Content -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- Right sidebar -->
                <!-- ============================================================== -->
                <!-- .right-sidebar -->
                <!-- ============================================================== -->
                <!-- End Right sidebar -->
                <!-- ============================================================== -->
            </div>
        </div>

  
        <!-- ============================================================== -->
        <!-- End Page wrapper  -->
        <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- End Wrapper -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- All Jquery -->
    <!-- ============================================================== -->

    <script src="~/Admin/plugins/bower_components/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap tether Core JavaScript -->
    <script src="~/Admin/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/Admin/js/app-style-switcher.js"></script>
    <script src="~/Admin/plugins/bower_components/jquery-sparkline/jquery.sparkline.min.js"></script>
    <!--Wave Effects -->
    <script src="~/Admin/js/waves.js"></script>
    <!--Menu sidebar -->
    <script src="~/Admin/js/sidebarmenu.js"></script>
    <!--Custom JavaScript -->
    <script src="~/Admin/js/custom.js"></script>
    <!--This page JavaScript -->
    <!--chartis chart-->
    <script src="~/Admin/plugins/bower_components/chartist/dist/chartist.min.js"></script>
    <script src="~/Admin/plugins/bower_components/chartist-plugin-tooltips/dist/chartist-plugin-tooltip.min.js"></script>
    <script src="~/Admin/js/pages/dashboards/dashboard1.js"></script>

    





    
<script src="https://code.jquery.com/jquery3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.11.1/js/jquery.dataTables.min.js" defer></script>
<script src="https://cdn.datatables.net/buttons/2.0.0/js/dataTables.buttons.min.js" defer></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/2.0.0/js/buttons.html5.min.js" defer></script>


 <script>
$(document).ready(function() {
    $('#example').DataTable({
        dom: 'Bfrtip',
        buttons: [
            'copyHtml5',
            'excelHtml5',
            'csvHtml5',
            'pdfHtml5'
        ]
    });
});
</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>

var num = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.num));
var year = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.year));


  

  const data = {
    labels: year,
    datasets: [{
      label: 'the number reservation approved per year',
      backgroundColor: 'rgb(255, 99, 132)',
      borderColor: 'rgb(255, 99, 132)',
      data: num,
    }]
  };

  const config = {
    type: 'bar',
    data: data,
    options: {}
  };
</script>


<script>
    const myChart = new Chart(
    document.getElementById('myChart'),
    config
  );
</script>


















